"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fetchRequestFactory = void 0;
const tslib_1 = require("tslib");
const logger_1 = require("../logger");
const types_1 = require("../types");
const runtime_1 = require("../../runtime");
function fetchRequestFactory(config) {
    return function fetchRequest(url, options) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const log = (0, logger_1.logger)(config);
            const doLog = config.logger.httpRequests && config.logger.level === types_1.LogSeverity.Debug;
            if (doLog) {
                log.debug('Making HTTP request', Object.assign({ method: (options === null || options === void 0 ? void 0 : options.method) || 'GET', url }, ((options === null || options === void 0 ? void 0 : options.body) && { body: options === null || options === void 0 ? void 0 : options.body })));
            }
            const response = yield (0, runtime_1.abstractFetch)(url, options);
            if (doLog) {
                log.debug('HTTP request completed', {
                    method: (options === null || options === void 0 ? void 0 : options.method) || 'GET',
                    url,
                    status: response.status,
                });
            }
            return response;
        });
    };
}
exports.fetchRequestFactory = fetchRequestFactory;
//# sourceMappingURL=fetch-request.js.map